<ion-content [fullscreen]="true">
  <div style="padding: 16px;">
    <h1 style="font-size: 22px; font-weight: bold; margin-bottom: 12px;">Damage Detector</h1>

    <!-- Damage Comparison -->
    <section style="margin-bottom: 16px;">
      <canvas #damageCanvas style="width: 100%; border: 2px solid #333;"></canvas>
      <ion-button color="danger" expand="block" (click)="compareDamagePhotos()">Compare Damage</ion-button>
    </section>

    <!-- Action Buttons -->
    <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 24px;">
      <ion-button color="primary" (click)="downloadReport()">Report</ion-button>
      <ion-button color="secondary" (click)="goToDashboard()">Dashboard</ion-button>
      <ion-button expand="block" color="success" (click)="uploadAllPhotos()">Upload Photos</ion-button>
    </div>

    <!-- Pickup Photos -->
    <section style="margin-bottom: 24px;">
      <h2 style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Pickup Photos</h2>
      <div class="photo-grid">
        <ng-container *ngFor="let photo of pickupPhotos; let i = index">
          <div class="photo-item">
            <img [src]="photo" class="photo-img" (click)="openPhotoActionSheet('pickup', i)" />
          </div>
        </ng-container>
        <div class="photo-item add-photo" (click)="openPhotoActionSheet('pickup', -1)">
          <ion-icon name="camera-outline"></ion-icon>
          <span>Add Photo</span>
        </div>
      </div>
    </section>

    <!-- Return Photos -->
    <section style="margin-bottom: 24px;">
      <h2 style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Return Photos</h2>
      <div class="photo-grid">
        <ng-container *ngFor="let photo of returnPhotos; let i = index">
          <div class="photo-item">
            <img [src]="photo" class="photo-img" (click)="openPhotoActionSheet('return', i)" />
          </div>
        </ng-container>
        <div class="photo-item add-photo" (click)="openPhotoActionSheet('return', -1)">
          <ion-icon name="camera-outline"></ion-icon>
          <span>Add Photo</span>
        </div>
      </div>
    </section>

    <!-- Hidden file input -->
    <input #carsFileInput type="file" accept="image/*" hidden multiple (change)="onPhotoSelected($event)" />
  </div>
</ion-content>

<style>
  .photo-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .photo-item {
    width: 80px;
    height: 80px;
    border-radius: 8px;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .photo-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 8px;
  }

  .add-photo {
    border: 2px dashed #ccc;
    cursor: pointer;
    color: #888;
    flex-direction: column;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  ion-content {
    --overflow: auto;
  }
</style>
